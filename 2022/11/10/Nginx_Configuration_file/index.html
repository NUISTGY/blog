<!DOCTYPE html><html lang="zh-Hans"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="Nginx 核心配置文件"><meta name="keywords" content="后端,Nginx,中间件"><meta name="author" content="GeYu"><meta name="copyright" content="GeYu"><title>Nginx 核心配置文件 | Yu's Blog</title><link rel="shortcut icon" href="/favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.6.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.6.1"><link rel="dns-prefetch" href="https://cdn.staticfile.org"><link rel="dns-prefetch" href="https://cdn.bootcss.com"><link rel="dns-prefetch" href="https://creativecommons.org"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  }
} </script></head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="toggle-sidebar-info text-center"><span data-toggle="切换文章详情">切换站点概览</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Nginx-核心配置文件"><span class="toc-number">1.</span> <span class="toc-text">Nginx 核心配置文件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#配置文件内容"><span class="toc-number">1.1.</span> <span class="toc-text">配置文件内容</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#小结"><span class="toc-number">1.1.1.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#全局块"><span class="toc-number">1.2.</span> <span class="toc-text">全局块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#user指令"><span class="toc-number">1.2.1.</span> <span class="toc-text">user指令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#work-process指令"><span class="toc-number">1.2.2.</span> <span class="toc-text">work process指令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#其他指令"><span class="toc-number">1.2.3.</span> <span class="toc-text">其他指令</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#events块"><span class="toc-number">1.3.</span> <span class="toc-text">events块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#events指令"><span class="toc-number">1.3.1.</span> <span class="toc-text">events指令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#events指令配置模板"><span class="toc-number">1.3.2.</span> <span class="toc-text">events指令配置模板</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#http块"><span class="toc-number">1.4.</span> <span class="toc-text">http块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#定义MIME-Type"><span class="toc-number">1.4.1.</span> <span class="toc-text">定义MIME-Type</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#自定义服务日志"><span class="toc-number">1.4.2.</span> <span class="toc-text">自定义服务日志</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#其他配置指令"><span class="toc-number">1.4.3.</span> <span class="toc-text">其他配置指令</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#server块和location块"><span class="toc-number">1.5.</span> <span class="toc-text">server块和location块</span></a></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="https://images5.alphacoders.com/423/423529.jpg"></div><div class="author-info__name text-center">GeYu</div><div class="author-info__description text-center">Do what you want to do !</div><div class="follow-button"><a href="https://github.com/NUISTGY">Follow Me</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">227</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">标签</span><span class="pull-right">83</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">分类</span><span class="pull-right">46</span></a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://pic.syst.eu.org/WechatIMG8673.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Yu's Blog</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a><a class="site-page" href="/about">About</a></span></div><div id="post-info"><div id="post-title">Nginx 核心配置文件</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2022-11-10</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Nginx/">Nginx</a><div class="post-meta-wordcount"><span>字数总计: </span><span class="word-count">4.4k</span><span class="post-meta__separator">|</span><span>阅读时长: 16 分钟</span></div></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><script src="/assets/js/APlayer.min.js"> </script><h1 id="Nginx-核心配置文件"><a href="#Nginx-核心配置文件" class="headerlink" title="Nginx 核心配置文件"></a>Nginx 核心配置文件</h1><p>从前面的内容学习中，我们知道 Nginx 的核心配置文件默认是放在 <code>/usr/local/nginx/conf/nginx.conf</code>，本次我们就来学习下 nginx.conf 的内容和基本配置方法。</p>
<hr>
<h2 id="配置文件内容"><a href="#配置文件内容" class="headerlink" title="配置文件内容"></a>配置文件内容</h2><p>读取 Nginx 自带的 Nginx 配置文件，配置文件内容很多，我们先将其中的注释部分【学习一个技术点就是在 Nginx 的配置文件中可以使用 <code>#</code> 来注释】删除掉后，就剩下如下内容：</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">worker_processes</span>  <span class="number">1</span>;   <span class="comment"># 使用指令 1 </span></span><br><span class="line"></span><br><span class="line"><span class="section">events</span> &#123;    <span class="comment"># 这是 events 块</span></span><br><span class="line">    <span class="attribute">worker_connections</span>  <span class="number">1024</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">http</span> &#123;    <span class="comment"># 这是 http 块</span></span><br><span class="line">    <span class="attribute">include</span>       mime.types;</span><br><span class="line">    <span class="attribute">default_type</span>  application/octet-stream;</span><br><span class="line">    <span class="attribute">sendfile</span>        <span class="literal">on</span>;</span><br><span class="line">    <span class="attribute">keepalive_timeout</span>  <span class="number">65</span>;</span><br><span class="line"></span><br><span class="line">    <span class="section">server</span> &#123;</span><br><span class="line">        <span class="attribute">listen</span>       <span class="number">80</span>;   <span class="comment"># 监听 80 端口</span></span><br><span class="line">        <span class="attribute">server_name</span>  localhost;   <span class="comment"># 监听请求过来的 IP</span></span><br><span class="line">        <span class="attribute">location</span> / &#123;   <span class="comment"># 请求的地址是 /，则进入这个配置，访问 idnex.html</span></span><br><span class="line">            <span class="attribute">root</span>   html;      <span class="comment"># 进入 html 目录找到访问的页面</span></span><br><span class="line">            <span class="attribute">index</span>  index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment"># 如果访问的页面是 500 502 503 504，则发送 /50x.html 请求</span></span><br><span class="line">        <span class="attribute">error_page</span>   <span class="number">500</span> <span class="number">502</span> <span class="number">503</span> <span class="number">504</span>  /50x.html;  </span><br><span class="line">        <span class="attribute">location</span> = /50x.html &#123;      <span class="comment"># 如果匹配上 /50x.html 请求</span></span><br><span class="line">            <span class="attribute">root</span>   html;     <span class="comment"># 则进入 html 目录找到 /50x.html</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>对上面文件内容的解释，一一对应比较解释：</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">指令名	指令值;  # 全局块，主要设置 Nginx 服务器整体运行的配置指令</span><br><span class="line"></span><br><span class="line"><span class="comment"># events 块，主要设置 Nginx 服务器与用户的网络连接,这一部分对 Nginx 服务器的性能影响较大</span></span><br><span class="line"><span class="section">events</span> &#123;	 </span><br><span class="line">    指令名	指令值;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># http 块，是 Nginx 服务器配置中的重要部分，代理、缓存、日志记录、第三方模块配置...             </span></span><br><span class="line"><span class="section">http</span> &#123;		</span><br><span class="line">    指令名	指令值;</span><br><span class="line"></span><br><span class="line">    <span class="section">server</span> &#123; 		<span class="comment"># server 块，是 Nginx 配置和虚拟主机相关的内容</span></span><br><span class="line">        指令名	指令值;</span><br><span class="line">        <span class="attribute">location</span> / &#123;      <span class="comment"># location 块，基于 Nginx 服务器接收请求字符串与 location 后面的值进行匹配，对特定请求进行处理</span></span><br><span class="line">            指令名	指令值;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><p>nginx.conf 配置文件中默认有三大块：全局块、events 块、http 块</p>
<p>http 块中可以配置多个 server 块，每个 server 块又可以配置多个 location 块。</p>
<h2 id="全局块"><a href="#全局块" class="headerlink" title="全局块"></a>全局块</h2><p>全局块的配置影响 Nginx 的全局设置。如用户权限，启动的进程数等。</p>
<h3 id="user指令"><a href="#user指令" class="headerlink" title="user指令"></a>user指令</h3><ol>
<li>user：用于配置运行 Nginx 服务器的 worker 进程的用户和用户组。</li>
</ol>
<table>
<thead>
<tr>
<th>语法</th>
<th>默认值</th>
<th>位置</th>
</tr>
</thead>
<tbody><tr>
<td>user &lt;user&gt; [group]</td>
<td>nobody</td>
<td>全局块</td>
</tr>
</tbody></table>
<p>该属性也可以在编译的时候指定，语法如下 <code>./configure --user=user --group=group</code>，如果两个地方都进行了设置，最终生效的是配置文件中的配置。</p>
<p>该指令的使用步骤:</p>
<ol>
<li>进入配置文件添加一个用户信息 『 www 』</li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">user www</span><br></pre></td></tr></table></figure>

<p>测试进行测试配置文件会报错：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx -t</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@master conf]<span class="comment"># nginx -t</span></span><br><span class="line">nginx: [emerg] getpwnam(<span class="string">"www"</span>) failed <span class="keyword">in</span> /usr/<span class="built_in">local</span>/nginx/conf/nginx.conf:1</span><br><span class="line">nginx: configuration file /usr/<span class="built_in">local</span>/nginx/conf/nginx.conf <span class="built_in">test</span> failed</span><br></pre></td></tr></table></figure>

<p>原因在于 Linux 系统不存在 www 用户，我们需要创建它。</p>
<ol start="2">
<li>创建一个用户</li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd www</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>重启 Nginx 的配置文件</li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">nginx -s reload</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看重启是否生效</span></span><br><span class="line">ps -ef | grep nginx</span><br></pre></td></tr></table></figure>

<p>最后返回的结果由 root 用户改为 www 用户，代表配置成功。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@master conf]<span class="comment"># ps -ef | grep nginx</span></span><br><span class="line">root       8960      1  0 16:13 ?        00:00:00 nginx: master process ./nginx</span><br><span class="line">www       11975   8960  0 20:44 ?        00:00:00 nginx: worker process</span><br><span class="line">root      11978  10615  0 20:44 pts/1    00:00:00 grep --color=auto nginx</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>在 Linux 的 <code>/root</code> 下创建一个 html 目录，并且进入 html 目录，创建 index.html 文件</li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mkdir /root/html</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> /root/html</span><br><span class="line"></span><br><span class="line">vim index.html</span><br></pre></td></tr></table></figure>

<p>然后在 <code>/root/html/index.html</code> 文件里添加如下内容：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>Welcome to nginx!<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">    body &#123;</span><br><span class="line">        width: 35em;</span><br><span class="line">        margin: 0 auto;</span><br><span class="line">        font-family: Tahoma, Verdana, Arial, sans-serif;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Welcome to nginx!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>If you see this page, the nginx web server is successfully installed and</span><br><span class="line">working. Further configuration is required.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>For online documentation and support please refer to</span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://nginx.org/"</span>&gt;</span>nginx.org<span class="tag">&lt;/<span class="name">a</span>&gt;</span>.<span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">Commercial support is available at</span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://nginx.com/"</span>&gt;</span>nginx.com<span class="tag">&lt;/<span class="name">a</span>&gt;</span>.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">em</span>&gt;</span>Thank you for using nginx.<span class="tag">&lt;/<span class="name">em</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">em</span>&gt;</span>I am WWW<span class="tag">&lt;/<span class="name">em</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>这些内容其实就是在 Nginx 的欢迎页面上多加别 <code>I am WWW</code> 内容。</p>
<ol start="5">
<li>修改 nginx.conf</li>
</ol>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">location</span> / &#123;</span><br><span class="line">	<span class="comment"># root   html;  # 原始的代码注释掉</span></span><br><span class="line">	<span class="attribute">root</span>   /root/html;    <span class="comment"># 不再是 html 目录，而是 root 下的 html 目录</span></span><br><span class="line">	<span class="attribute">index</span>  index.html index.htm;  <span class="comment"># 就是上方创建的 index.html</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="6">
<li><code>nginx -s reload</code>重新加载后，测试启动访问</li>
</ol>
<p><img src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting1@master/20220728/image.6dtnfz58zpo0.webp" alt="image"></p>
<p> 页面会报 403 拒绝访问的错误。</p>
<ol start="7">
<li>分析原因：因为当前用户（www 用户）没有访问 <code>/root/html</code> 目录的权限，这个目录只有 root 才能访问。</li>
</ol>
<p>那么 www 如何访问我们写的 index.html 页面呢？我们知道，每新建一个用户，<code>/home</code> 下都会生成该用户权限的目录。</p>
<ol start="8">
<li>将文件移动到 <code>/home/www/html/index.html</code></li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv /root/html /home/www</span><br></pre></td></tr></table></figure>

<ol start="9">
<li>记得修改配置文件的资源内容</li>
</ol>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">location</span> / &#123;</span><br><span class="line">	<span class="comment"># root   html;  # 原始的代码注释掉</span></span><br><span class="line">	<span class="comment"># root   /root/html;   # 这属于 root 权限的页面，注释或者删除掉</span></span><br><span class="line">	<span class="attribute">root</span>   /home/www/html;  <span class="comment"># 这是 www 用户有权限访问的目录</span></span><br><span class="line">	<span class="attribute">index</span>  index.html index.htm;   <span class="comment"># 访问了 html 目录，然后访问 index.html 文件</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="10">
<li>再次测试启动访问，可以正常访问。</li>
</ol>
<p>综上所述，使用 user 指令可以指定启动运行工作进程的用户及用户组，这样对于系统的权限访问控制的更加精细，也更加安全。</p>
<p>我们也能理解了配置文件的 <code>locaotion</code> 块的基本使用，root 对应着访问目录，index 对应着访问目录下的默认页面。</p>
<p><img src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting1@master/20220728/image.6igjptnd6eo0.webp" alt="image"></p>
<h3 id="work-process指令"><a href="#work-process指令" class="headerlink" title="work process指令"></a>work process指令</h3><ol>
<li><code>master_process</code> 指令用来指定是否开启 worker 工作进程。</li>
</ol>
<p>如果为 off，则代表关闭了 worker 进程，这时候启动 Nginx，只有 master 进程启动，没有 worker 进程。默认开启 worker 工作进程。(<mark>需要重启nginx服务生效</mark>)</p>
<table>
<thead>
<tr>
<th>语法</th>
<th>默认值</th>
<th>位置</th>
</tr>
</thead>
<tbody><tr>
<td>master_process &lt;on | off&gt;;</td>
<td>master_process on;</td>
<td>全局块</td>
</tr>
</tbody></table>
<ol start="2">
<li><p><code>worker_processes</code> 指令用于配置 Nginx 生成 worker 工作进程的数量，这个是 Nginx 服务器实现并发处理</p>
<p>服务的关键所在。</p>
</li>
</ol>
<p>理论上来说 <code>workder process</code> 的值越大，可以支持的并发处理量也越多，但事实上这个值的设定是需要受到来自服务器自身的限制，建议将该值和服务器 CPU 的内核数保存一致。</p>
<table>
<thead>
<tr>
<th>语法</th>
<th>默认值</th>
<th>位置</th>
</tr>
</thead>
<tbody><tr>
<td>worker_processes &lt;num | auto&gt;;</td>
<td>1</td>
<td>全局块</td>
</tr>
</tbody></table>
<p>如果将 <code>worker_processes</code> 设置成 2，则会看到如下内容:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@master conf]<span class="comment"># ps -ef | grep nginx</span></span><br><span class="line">root       8960      1  0 16:13 ?        00:00:00 nginx: master process ./nginx</span><br><span class="line">www       12299   8960  0 21:14 ?        00:00:00 nginx: worker process</span><br><span class="line">www       12300   8960  0 21:14 ?        00:00:00 nginx: worker process</span><br><span class="line">root      12302  10615  0 21:14 pts/1    00:00:00 grep --color=auto nginx</span><br></pre></td></tr></table></figure>

<p>出现两个 worker 工作进程。</p>
<h3 id="其他指令"><a href="#其他指令" class="headerlink" title="其他指令"></a>其他指令</h3><ol>
<li><code>daemon</code> 指令设置 Nginx 是否以守护进程的方式启动。on 代表开启守护进程，off 代表关闭守护进程，默认开启。(<mark>需要重启nginx生效</mark>)</li>
</ol>
<p>守护式进程是 Linux 后台执行的一种服务进程，特点是 <strong>独立于控制终端，不会随着终端关闭而停止</strong>，也就是后台启动。</p>
<table>
<thead>
<tr>
<th>语法</th>
<th>默认值</th>
<th>位置</th>
</tr>
</thead>
<tbody><tr>
<td>daemon &lt;on | off&gt;;</td>
<td>daemon on;</td>
<td>全局块</td>
</tr>
</tbody></table>
<ol start="2">
<li><code>pid</code> 指令用来配置 Nginx 当前 master 进程的进程号 ID 存储的文件路径。默认路径是 <code>/usr/local/nginx/logs/nginx.pid</code>。</li>
</ol>
<table>
<thead>
<tr>
<th>语法</th>
<th>默认值</th>
<th>位置</th>
</tr>
</thead>
<tbody><tr>
<td>pid &lt;file&gt;;</td>
<td>/usr/local/nginx/logs/nginx.pid</td>
<td>全局块</td>
</tr>
</tbody></table>
<p>该属性也可以通过 <code>./configure --pid-path=PATH</code> 在编译时来指定。</p>
<ol start="3">
<li><code>error_log</code> 指令用来配置 Nginx 的错误日志存放路径。默认路径是 <code>/usr/local/nginx/logs/error.log</code>。</li>
</ol>
<table>
<thead>
<tr>
<th>语法</th>
<th>默认值</th>
<th>位置</th>
</tr>
</thead>
<tbody><tr>
<td>error_log &lt;file&gt; [日志级别];</td>
<td>error_log logs/error.log error;</td>
<td>全局块、http、server、location</td>
</tr>
</tbody></table>
<p>该属性也可以通过 <code>./configure --error-log-path=PATH</code> 在编译时来指定。</p>
<p>其中日志级别的值有『 debug | info | notice | warn | error | crit | alert | emerg 』，翻译过来为「调试 | 信息 | 通知 | 警告 | 错误 | 临界 | 警报 | 紧急」，这块建议大家设置的时候不要设置成 info 以下的等级，因为会带来大量的磁盘 I/O 消耗，影响 Nginx 的性能。</p>
<ol start="4">
<li><code>include</code> 指令用来引入其他的配置文件，使 Nginx 的配置更加灵活。</li>
</ol>
<table>
<thead>
<tr>
<th>语法</th>
<th>默认值</th>
<th>位置</th>
</tr>
</thead>
<tbody><tr>
<td>include &lt;file&gt;;</td>
<td>无</td>
<td>any</td>
</tr>
</tbody></table>
<h2 id="events块"><a href="#events块" class="headerlink" title="events块"></a>events块</h2><h3 id="events指令"><a href="#events指令" class="headerlink" title="events指令"></a>events指令</h3><ol>
<li><code>accept_mutex</code> 指令用来设置是否开启 Nginx 网络连接序列化。默认开启。</li>
</ol>
<table>
<thead>
<tr>
<th>语法</th>
<th>默认值</th>
<th>位置</th>
</tr>
</thead>
<tbody><tr>
<td>accept_mutex &lt;on | off&gt;;</td>
<td>accept_mutex on;</td>
<td>events</td>
</tr>
</tbody></table>
<p>这个配置主要可以用来解决常说的「惊群」问题。大致意思是在某一个时刻，客户端发来一个请求连接，Nginx 后台是以多进程的工作模式，也就是说有多个 worker 进程会被同时唤醒，但是最终只会有一个进程可以获取到连接，如果每次唤醒的进程数目太多，就会影响 Nginx 的整体性能。如果将上述值设置为 on (开启状态)，将会对多个 Nginx 进程接收连接进行序列号，一个个来唤醒接收，就防止了多个进程对连接的争抢。</p>
<p>如图的小狗，如果只是一块「骨头」出现，则只需要唤醒一个小狗即可（开启 on），如果多个「骨头」如三个同时出现，那么唤醒三个小狗效率更高（此时需要设置 off）</p>
<p><img src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting1@master/20220728/image.118zwwf8v268.webp" alt="image"></p>
<ol start="2">
<li><code>multi_accept</code> 指令用来设置是否开启同时接收多个网络连接。默认开启。</li>
</ol>
<table>
<thead>
<tr>
<th>语法</th>
<th>默认值</th>
<th>位置</th>
</tr>
</thead>
<tbody><tr>
<td>multi_accept &lt;on | off&gt;;</td>
<td>multi_accept off;</td>
<td>events</td>
</tr>
</tbody></table>
<p>如果 multi_accept 被禁止了，Nginx 的一个工作进程只能同时接受一个新的连接。如果开启，一个工作进程可以同时接受所有的新连接。<strong>建议开启。</strong></p>
<ol start="3">
<li><code>worker_connections</code> 指令用来配置单个 worker 进程最大的连接数。默认 512 个连接数。</li>
</ol>
<table>
<thead>
<tr>
<th>语法</th>
<th>默认值</th>
<th>位置</th>
</tr>
</thead>
<tbody><tr>
<td>worker_connections &lt;number&gt;;</td>
<td>worker_commections 512;</td>
<td>events</td>
</tr>
</tbody></table>
<p>这里的连接数不仅仅包括和前端用户建立的连接数，而是包括所有可能的连接数。另外，number 值不能大于操作系统支持打开的最大文件句柄数量。</p>
<ol start="4">
<li><code>use</code> 指令用来设置 Nginx 服务器选择哪种事件驱动来处理网络消息。</li>
</ol>
<table>
<thead>
<tr>
<th>语法</th>
<th>默认值</th>
<th>位置</th>
</tr>
</thead>
<tbody><tr>
<td>use &lt;method&gt;;</td>
<td>根据操作系统规定</td>
<td>events</td>
</tr>
</tbody></table>
<p>注意：此处所选择事件处理模型是 Nginx 优化部分的一个重要内容，method 的可选值有『 select | poll | epoll | kqueue 』等，之前在准备 Centos 环境的时候，我们强调过要使用 Linux 内核在 2.6 以上，就是为了能使用 epoll 函数来优化 Nginx。</p>
<p>另外这些值的选择，我们也可以在编译的时候使用 <code>--with-select_module</code>、<code>--without-select_module</code>、<code>--with-poll_module</code>、<code>--without-poll_module</code> 来设置是否需要将对应的事件驱动模块编译到 Nginx 的内核。</p>
<h3 id="events指令配置模板"><a href="#events指令配置模板" class="headerlink" title="events指令配置模板"></a>events指令配置模板</h3><p>打开 Nginx 的配置文件 nginx.conf，添加如下配置</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">events&#123;</span><br><span class="line">	<span class="attribute">accept_mutex</span> <span class="literal">on</span>;    <span class="comment"># 开启 Nginx 网络连接序列化</span></span><br><span class="line">	<span class="attribute">multi_accept</span> <span class="literal">on</span>;    <span class="comment"># 开启同时接收多个网络连接</span></span><br><span class="line">	<span class="attribute">worker_commections</span> <span class="number">1024</span>;   <span class="comment"># 单个 worker 进程最大的连接数</span></span><br><span class="line">	<span class="attribute">use</span> <span class="literal">epoll</span>;   <span class="comment"># 使用 epoll 函数来优化 Nginx</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>启动测试</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 测试配置是否语法出错</span></span><br><span class="line">nginx -t</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重新加载 Nginx</span></span><br><span class="line">nginx -s reload</span><br></pre></td></tr></table></figure>

<h2 id="http块"><a href="#http块" class="headerlink" title="http块"></a>http块</h2><h3 id="定义MIME-Type"><a href="#定义MIME-Type" class="headerlink" title="定义MIME-Type"></a>定义MIME-Type</h3><p>我们都知道浏览器中可以显示的内容有 HTML、XML、GIF 等种类繁多的文件、媒体等资源，浏览器为了区分这些资源，就需要使用 MIME Type。所以说 MIME Type 是网络资源的媒体类型。Nginx 作为 Web 服务器，也需要能够识别前端请求的资源类型。</p>
<p>在 Nginx 的配置文件中，默认有两行配置：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">include mime.types;      <span class="comment"># 引入 mime.types 文件的内容</span></span><br><span class="line">default_type application/octet-stream;     <span class="comment"># 默认的 MIME 类型</span></span><br></pre></td></tr></table></figure>

<ol>
<li><code>default_type</code> 指令用来配置 Nginx 响应前端请求默认的 MIME 类型。默认是 text 文本。</li>
</ol>
<table>
<thead>
<tr>
<th>语法</th>
<th>默认值</th>
<th>位置</th>
</tr>
</thead>
<tbody><tr>
<td>default_type &lt;mime-type&gt;;</td>
<td>default_type text/plain;</td>
<td>http、server、location</td>
</tr>
</tbody></table>
<p>在 <code>default_type</code> 前面还有一句 <code>include mime.types</code>，include 之前我们已经介绍过，相当于把 mime.types 文件中 MIMT 类型与相关类型文件的文件后缀名的对应关系加入到当前的配置文件中。</p>
<p>举例来说明：</p>
<p>有些时候请求某些接口的时候需要返回指定的文本字符串或者 json 字符串，而不是页面，如果逻辑非常简单或者干脆是固定的字符串，那么可以使用 Nginx 快速实现，这样就不用编写程序响应请求了，可以减少服务器资源占用并且响应性能非常快。</p>
<p>如何实现：</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">location</span> /get_text &#123;</span><br><span class="line">    <span class="attribute">default_type</span> text/html;      <span class="comment"># 等价于 text/plain，返回文本类型</span></span><br><span class="line">    <span class="attribute">return</span> <span class="number">200</span> <span class="string">"&lt;h1&gt;This is nginx's text&lt;/h1&gt;"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="attribute">location</span> /get_json&#123;</span><br><span class="line">    <span class="attribute">default_type</span> application/json;   <span class="comment"># 返回 json 字符串类型</span></span><br><span class="line">    <span class="attribute">return</span> <span class="number">200</span> <span class="string">'&#123;"name": "xiaoming", "age": 21&#125;'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting1@master/20220728/image.1joqriwre9j4.webp" alt="image"></p>
<p><img src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting1@master/20220728/image.47ty7dkhzmi0.webp" alt="image"></p>
<h3 id="自定义服务日志"><a href="#自定义服务日志" class="headerlink" title="自定义服务日志"></a>自定义服务日志</h3><p>Nginx 中日志的类型分 access.log、error.log。</p>
<p><code>access.log</code> 日志用来记录用户所有的访问请求。</p>
<p><code>error.log</code> 日志记录 Nginx 本身运行时的错误信息，不会记录用户的访问请求。</p>
<p>Nginx 服务器支持对服务日志的格式、大小、输出等进行设置，需要使用到两个指令，分别是 <code>access_log</code> 和 <code>log_format</code> 指令。</p>
<ol>
<li><code>access_log</code> 指令用来设置用户访问日志的相关属性。</li>
</ol>
<table>
<thead>
<tr>
<th>语法</th>
<th>默认值</th>
<th>位置</th>
</tr>
</thead>
<tbody><tr>
<td>access_log &lt;path&gt; [format[buffer=size]];</td>
<td>access_log logs/access.log combined;</td>
<td>http、server、location</td>
</tr>
</tbody></table>
<p>format 对应着 <code>log_format</code> 的 name，必须保持一致。</p>
<ol start="2">
<li><code>log_format</code> 指令用来指定日志的输出格式。</li>
</ol>
<table>
<thead>
<tr>
<th>语法</th>
<th>默认值</th>
<th>位置</th>
</tr>
</thead>
<tbody><tr>
<td>log_format &lt;name&gt; [escape=default | json | none] &lt;string&gt; …… ;</td>
<td>log_format combined “…”;</td>
<td>http</td>
</tr>
</tbody></table>
<p>name 对用 <code>access_log</code> 的 format，必须保持一致。</p>
<blockquote>
<p><strong>例子 1：自定义日志路径和输出格式</strong></p>
</blockquote>
<ul>
<li>在 <code>/usr/local/nginx/logs</code> 下创建 my.log 文件，该文件作为日志。</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir /usr/<span class="built_in">local</span>/nginx/logs/my.log</span><br></pre></td></tr></table></figure>

<ul>
<li>自定义日志输出格式：<code>==========&gt;This is My format</code></li>
<li>在配置文件配置相关指令</li>
</ul>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">log_format</span> myformat <span class="string">'=========&gt;This is My format'</span>;</span><br><span class="line"><span class="attribute">access_log</span> logs/my.log myformat;</span><br></pre></td></tr></table></figure>

<ul>
<li>重启服务并进行测试</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 重启 Nginx 服务</span></span><br><span class="line">nginx -s reload</span><br><span class="line"></span><br><span class="line"><span class="comment"># 监听日志</span></span><br><span class="line">tail -f /usr/<span class="built_in">local</span>/nginx/logs/my.log</span><br></pre></td></tr></table></figure>

<p>浏览器访问一次 Nginx 的欢迎页面，回来看日志的输出，结果如图：</p>
<p><img src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting1@master/20220728/image.5t1f8j2rclc0.webp" alt="image"></p>
<blockquote>
<p><strong>例子 2：输出内容加上访问机器的信息</strong></p>
</blockquote>
<ul>
<li>进入配置文件，在输出格式上加上 Nginx 的内置参数</li>
</ul>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">log_format</span> myformat <span class="string">'=========&gt;This is My format:<span class="variable">$http_user_agent</span>'</span>;</span><br><span class="line"><span class="attribute">access_log</span> logs/my.log myformat;</span><br></pre></td></tr></table></figure>

<ul>
<li>重启测试</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 重启 Nginx 服务</span></span><br><span class="line">nginx -s reload</span><br><span class="line"></span><br><span class="line"><span class="comment"># 监听日志</span></span><br><span class="line">tail -f /usr/<span class="built_in">local</span>/nginx/logs/my.log</span><br></pre></td></tr></table></figure>

<p>浏览器访问一次 Nginx 的欢迎页面，回来看日志的输出，结果如图：</p>
<p><img src="https://cdn.staticaly.com/gh/xustudyxu/image-hosting1@master/20220728/image.2rkljjc3tlk0.webp" alt="image"></p>
<h3 id="其他配置指令"><a href="#其他配置指令" class="headerlink" title="其他配置指令"></a>其他配置指令</h3><ol>
<li><code>sendfile</code>：用来设置 Nginx 服务器是否使用 sendfile 传输文件，该属性可以大大提高 Nginx 处理静态资源的性能。默认关闭，建议开启。</li>
</ol>
<table>
<thead>
<tr>
<th>语法</th>
<th>默认值</th>
<th>位置</th>
</tr>
</thead>
<tbody><tr>
<td>sendfile &lt;on | off&gt;;</td>
<td>sendfile off;</td>
<td>http、server、location</td>
</tr>
</tbody></table>
<ol start="2">
<li><code>keepalive_timeout</code>：用来设置长连接的超时时间，默认超时时间是 75 秒。</li>
</ol>
<p><strong>为什么要使用 keepalive？</strong></p>
<p>我们都知道 HTTP 是一种无状态协议，客户端向服务端发送一个 TCP 请求，服务端响应完毕后断开连接。</p>
<p>如何客户端向服务端发送多个请求，每个请求都需要重新创建一次连接，效率相对来说比较多，使用 keepalive 模式，可以告诉服务器端在处理完一个请求后保持这个 TCP 连接的打开状态，若接收到来自这个客户端的其他请求，服务端就会利用这个未被关闭的连接，而不需要重新创建一个新连接，提升效率，但是这个连接也不能一直保持，这样的话，连接如果过多，也会是服务端的性能下降，这个时候就需要我们进行设置其的超时时间。</p>
<table>
<thead>
<tr>
<th>语法</th>
<th>默认值</th>
<th>位置</th>
</tr>
</thead>
<tbody><tr>
<td>keepalive_timeout &lt;time&gt;;</td>
<td>keepalive_timeout 75s;</td>
<td>http、server、location</td>
</tr>
</tbody></table>
<ol start="3">
<li><code>keepalive_requests</code>：用来设置一个 keep-alive 连接使用的次数，默认是 100 次。</li>
</ol>
<table>
<thead>
<tr>
<th>语法</th>
<th>默认值</th>
<th>位置</th>
</tr>
</thead>
<tbody><tr>
<td>keepalive_requests &lt;number&gt;;</td>
<td>keepalive_requests 100;</td>
<td>http、server、location</td>
</tr>
</tbody></table>
<h2 id="server块和location块"><a href="#server块和location块" class="headerlink" title="server块和location块"></a>server块和location块</h2><p>server 块和 location 块都是我们要重点学习的内容，因为我们后面会对 Nginx 的功能进行详细讲解，所以该内容在<strong>静态资源部署</strong>和<strong>静态资源访问</strong>进行详细说明。</p>
<p>本次我们这是认识下 Nginx 默认给的 nginx.conf 中的相关内容，以及 server 块与 location 块在使用的时候需要注意的一些内容。</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">	<span class="attribute">listen</span>       <span class="number">80</span>;     <span class="comment"># 监听 80 端口，如果更改端口，则外界访问的时候带上对应的端口号，如 8080</span></span><br><span class="line">	<span class="attribute">server_name</span>  localhost;  <span class="comment"># 指定可以访问 Nginx 的 IP 地址</span></span><br><span class="line">	</span><br><span class="line">	<span class="attribute">location</span> / &#123;      </span><br><span class="line">		<span class="attribute">root</span>   html;    <span class="comment"># 访问资源所对应的目录，这里是 html 目录</span></span><br><span class="line">		<span class="attribute">index</span>  index.html index.htm;    <span class="comment"># 访问资源所对应目录下的默认页面，优先级递增</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="attribute">error_page</span>   <span class="number">500</span> <span class="number">502</span> <span class="number">503</span> <span class="number">504</span> <span class="number">404</span>  /50x.html;  <span class="comment"># 访问错误，跳转访问 /50x.html 请求</span></span><br><span class="line">	<span class="attribute">location</span> = /50x.html &#123;   <span class="comment"># 访问 /50x.html 请求的处理</span></span><br><span class="line">		<span class="attribute">root</span>   html;    <span class="comment"># 访问资源所对应的目录，这里是 html 目录的 50x.html</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>listen 和 server_name 是我们的 <code>http://server_name:listen</code>，如 <code>http://localhost:80</code></li>
<li>location / 就是访问 <code>http://server_name:listen/</code>，里面的配置对应着 <code>http://server_name:listen/html/index.html</code></li>
<li>页面产生 500 502 503 504 404，就会发送 <code>http://server_name:listen/50x.html</code></li>
<li>location = /50x.html 就是 <code>http://server_name:listen/50x.html</code>，它会自动访问 <code>http://server_name:listen/html/50x.html</code></li>
<li>root 代表资源目录指令</li>
<li>index 代表默认访问网页指令</li>
</ul>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">GeYu</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://nuistgy.github.io/2022/11/10/Nginx_Configuration_file/">https://nuistgy.github.io/2022/11/10/Nginx_Configuration_file/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://nuistgy.github.io">Yu's Blog</a>！</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/后端/">后端</a><a class="post-meta__tags" href="/tags/Nginx/">Nginx</a><a class="post-meta__tags" href="/tags/中间件/">中间件</a></div><div class="addthis_inline_share_toolbox pull-right"></div><script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5befa2f76de7c6b5" async></script><nav id="pagination"><div class="prev-post pull-left"><a href="/2022/11/10/Nginx_Basic_case_configuration/"><i class="fa fa-chevron-left">  </i><span>Nginx 基础配置实例</span></a></div><div class="next-post pull-right"><a href="/2022/11/10/Nginx_Static_resource_deployment/"><span>Nginx 静态资源部署</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer class="footer-bg" style="background-image: url(https://pic.syst.eu.org/WechatIMG8673.jpg)"><div class="layout" id="footer"><div class="copyright">&copy;2015 - 2023 By GeYu</div><div class="framework-info"><span>驱动 - </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="footer_custom_text">Enjoy the cyber world!</div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_site_uv"><i class="fa fa-user"></i><span id="busuanzi_value_site_uv"></span><span></span></span><span class="footer-separator">|</span><span id="busuanzi_container_site_pv"><i class="fa fa-eye"></i><span id="busuanzi_value_site_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.6.1"></script><script src="/js/fancybox.js?version=1.6.1"></script><script src="/js/sidebar.js?version=1.6.1"></script><script src="/js/copy.js?version=1.6.1"></script><script src="/js/fireworks.js?version=1.6.1"></script><script src="/js/transition.js?version=1.6.1"></script><script src="/js/scroll.js?version=1.6.1"></script><script src="/js/head.js?version=1.6.1"></script><script>if(/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
}</script></body></html>